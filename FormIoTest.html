<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Form.io Renderer</title>

  <link rel="stylesheet" href="https://cdn.form.io/formiojs/formio.full.min.css">
  <script src="https://cdn.form.io/formiojs/formio.full.min.js"></script>

  <style>
    body { font-family: Arial; padding: 20px; }
    #formio { min-height: 500px; }
  </style>
</head>
<body>

<h2>Form.io Renderer</h2>
<div id="formio"></div>

<script>
  console.log("HTML loaded");

  window.addEventListener("message", function (event) {
      if (!event.data || event.data.type !== "formio-json") return;

      console.log("JSON received:", event.data.payload);

      const json = JSON.parse(event.data.payload);
      const container = document.getElementById("formio");

      Formio.createForm(container, json)
        .then(form => {
            form.on("submit", submission => {
                alert("Submitted: " + JSON.stringify(submission.data));
            });
        });
  });
</script>

</body>
</html>
